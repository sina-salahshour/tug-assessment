(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82],{1525:(e,n,r)=>{"use strict";r.d(n,{eo:()=>i,xU:()=>l,yL:()=>t});let t="en",i=[t],l="translation"},1961:(e,n,r)=>{"use strict";r.d(n,{DashboardPage:()=>eo});var t,i=r(1144),l=r(2761),o=r(5357),s=r(2744),a=r(299),d=r(5651);let{useDriverStatisticsQuery:c,useVehicleStatisticsQuery:h,useDueDatesStatisticsQuery:p,useDriverRecentSubmissionsQuery:u}=r(8475).q.injectEndpoints({endpoints:e=>({driverStatistics:e.query({query:()=>"https://sg-api.mylorry.ai/api/org/57/driver/statistics",transformResponse:e=>{if(null==e.data)throw Error("error fetching drivers");return e.data}}),vehicleStatistics:e.query({query:()=>"https://sg-api.mylorry.ai/api/org/57/vehicle/statistics",transformResponse:e=>{if(null==e.data)throw Error("error fetching vehicles");return e.data}}),dueDatesStatistics:e.query({query:()=>"https://sg-api.mylorry.ai/api/org/57/vehicle/due-dates/statistics",transformResponse:e=>{if(null==e.data)throw Error("error fetching due dates");return e.data}}),driverRecentSubmissions:e.query({query:()=>"https://sg-api.mylorry.ai/api/org/57/driver/submitted-forms",transformResponse:e=>{var n;if((null==(n=e.data)?void 0:n.forms)==null)throw Error("error fetching submissions");return e.data.forms}})}),overrideExisting:!1});var x=r(7468),g=r(143),m=r(6132);let f=(0,x.Ay)(g.A)({backgroundImage:"linear-gradient(to right, #0081AA, #00AA4F)",borderRadius:"8px",overflow:"hidden",color:"white",flex:1}),j=(0,x.Ay)(g.A)({backgroundColor:"#00000020",paddingInline:"16px",fontSize:"16px",fontWeight:"600",height:"39px",color:"white",display:"flex",paddingBlock:"10px",alignItems:"center"}),v=(0,x.Ay)(g.A)({display:"flex",minHeight:"98px"}),A=(0,x.Ay)(g.A)({flex:1,paddingTop:"19px",paddingBottom:"25px",width:"178px",minWidth:"0",display:"flex",flexDirection:"column",alignItems:"center","& > h2":{fontWeight:"600",fontSize:"28px"},"& > p":{fontSize:"12px",fontWeight:"400px"}}),y=(0,x.Ay)(A)({flex:2}),b=(0,x.Ay)(g.A)({marginTop:"19px",marginBottom:"25px",width:"0px",borderRight:"1px solid #D8D8D8"}),k=(0,x.Ay)(m.A)({maxWidth:"none",borderRadius:"8px",flex:1});function w(e){return(0,i.jsx)(f,{...e,children:e.children})}function C(){let{t:e}=(0,l.k)("dashboard"),{data:n,isLoading:r,refetch:t,isFetching:o}=c();return r?(0,i.jsx)(w.Skeleton,{variant:"rectangular",children:(0,i.jsxs)(w,{children:[(0,i.jsx)(w.Heading,{children:e("driver")}),(0,i.jsxs)(w.Content,{children:[(0,i.jsxs)(w.ItemLarge,{children:[(0,i.jsx)(a.A,{component:"h2",children:"."}),(0,i.jsx)(a.A,{component:"p",children:e("total-no-of-drivers")})]}),(0,i.jsx)(w.Separator,{}),(0,i.jsxs)(w.Item,{children:[(0,i.jsx)(a.A,{component:"h2",children:"."}),(0,i.jsx)(a.A,{component:"p",children:e("on-duty")})]}),(0,i.jsxs)(w.Item,{children:[(0,i.jsx)(a.A,{component:"h2",children:"."}),(0,i.jsx)(a.A,{component:"p",children:e("off-duty")})]})]})]})}):null==n?(0,i.jsxs)(w,{children:[(0,i.jsx)(w.Heading,{children:e("driver")}),(0,i.jsx)(w.Content,{children:(0,i.jsxs)(w.ItemLarge,{children:[e("error-while-loading"),(0,i.jsx)("p",{children:(0,i.jsx)(d.A,{loading:o,onClick:t,variant:"contained",disableElevation:!0,children:e("refetch")})})]})})]}):(0,i.jsxs)(w,{children:[(0,i.jsx)(w.Heading,{children:e("driver")}),(0,i.jsxs)(w.Content,{children:[(0,i.jsxs)(w.ItemLarge,{children:[(0,i.jsx)(a.A,{component:"h2",children:n.driverCount}),(0,i.jsx)(a.A,{component:"p",children:e("total-no-of-drivers")})]}),(0,i.jsx)(w.Separator,{}),(0,i.jsxs)(w.Item,{children:[(0,i.jsx)(a.A,{component:"h2",children:n.onDutyCount}),(0,i.jsx)(a.A,{component:"p",children:e("on-duty")})]}),(0,i.jsxs)(w.Item,{children:[(0,i.jsx)(a.A,{component:"h2",children:n.offDutyCount}),(0,i.jsx)(a.A,{component:"p",children:e("off-duty")})]})]})]})}w.Heading=j,w.Content=v,w.Item=A,w.ItemLarge=y,w.Separator=b,w.Skeleton=k;var S=r(1732);let I=(0,x.Ay)(a.A)({fontWeight:"600",fontSize:"24px",color:"#3C3C42"}),E=(0,x.Ay)(g.A)(e=>{let{theme:n}=e;return{display:"flex",gap:"31px",flex:1,[n.breakpoints.down("md")]:{flexDirection:"column",gap:"16px"}}}),N=(0,x.Ay)(g.A)({display:"flex",flexDirection:"column",gap:"21px",padding:"38px"}),L=(0,x.Ay)(g.A)({fontWeight:"600",fontSize:"16px",color:"#3C3C42",paddingBlock:"12px"}),D=(0,x.Ay)(m.A)({minHeight:"249px",maxWidth:"none",borderRadius:"8px",flex:1}),T=(0,x.Ay)(m.A)({minHeight:"249px",maxWidth:"none",borderRadius:"8px",flex:1});var z=r(1516),R=r(1284);function W(){return(W=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(null,arguments)}let B=(0,x.Ay)(g.A)({backgroundColor:"#F5F5F5",borderRadius:"8px",flex:1}),q=(0,x.Ay)(g.A)({fontWeight:"600",fontSize:"16px",color:"#3C3C42",paddingBlock:"12px",paddingInline:"18px"}),F=(0,x.Ay)(g.A)({display:"flex",alignItems:"center",minHeight:"200px",gap:"8px"}),H=(0,x.Ay)(g.A)({display:"flex",flexDirection:"column",gap:"5px",alignItems:"center",flex:"1"}),O=(0,x.Ay)(a.A)({color:"#3C3C42",fontWeight:"600",fontSize:"36px"}),_=(0,x.Ay)(a.A)({color:"#757575",fontSize:"12px"}),M=(0,x.Ay)(function(e){return S.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:1.5,className:"info_svg__size-6",viewBox:"0 0 24 24"},e),t||(t=S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0m-9-3.75h.008v.008H12z"})))})({width:"14px",height:"14px"}),U=(0,x.Ay)(g.A)({display:"flex",alignItems:"center",gap:"8px",paddingBlock:"8px"}),P=(0,x.Ay)(g.A)({width:"12px",height:"12px",borderRadius:"3px"}),G=(0,x.Ay)(g.A)({fontSize:"11px",color:"#757575",fontWeight:"400"}),V=(0,x.Ay)(g.A)({fontSize:"12px",fontWeight:"600",color:"#757575",display:"flex",alignItems:"center",gap:"4px"});function Q(e){var n;let{data:r}=e,t=(0,i.jsxs)(U,{children:[(0,i.jsx)(P,{sx:{backgroundColor:r.color}}),(0,i.jsxs)(G,{children:[(0,i.jsxs)(V,{children:[r.value," ",(0,i.jsx)(M,{})]}),null==(n=r.label)?void 0:n.toString()]})]});return r.tooltip?(0,i.jsx)(R.A,{title:r.tooltip,children:t}):t}function X(e){let{t:n}=(0,l.k)("dashboard"),r=e.data.reduce((e,n)=>e+n.value,0);return(0,i.jsxs)(B,{children:[(0,i.jsx)(q,{children:n("due-dates")}),(0,i.jsxs)(F,{children:[(0,i.jsx)(z.r,{series:[{data:e.data,innerRadius:40,paddingAngle:0,cornerRadius:0}],width:148,height:148,slotProps:{legend:{sx:{display:"none"}}}}),(0,i.jsx)(g.A,{children:e.data.map(e=>(0,i.jsx)(Q,{data:e},e.id))}),(0,i.jsxs)(H,{children:[(0,i.jsx)(O,{children:r.toLocaleString()}),(0,i.jsx)(_,{children:n("total-reminders")})]})]})]})}let Z=(0,x.Ay)(g.A)({flex:1}),J=(0,x.Ay)(a.A)({color:"#3C3C42",fontSize:"16px",paddingBottom:"14px",fontWeight:"600"}),K=(0,x.Ay)(g.A)({display:"grid",gridTemplateColumns:"1fr 1fr 1fr",rowGap:"8px",columnGap:"14px"}),Y=(0,x.Ay)(g.A)({backgroundColor:"#F5F5F5",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBlock:"24px","& > h2":{fontSize:"28px",fontWeight:"600",color:"#3C3C42"},"& > p":{fontSize:"12px",fontWeight:"400",color:"#757575"}});function $(e){let{t:n}=(0,l.k)("dashboard"),r=(0,S.useMemo)(()=>[{label:n("reminders.renewed"),value:e.data.filter(e=>"renew"===e.tag).length},{label:n("reminders.insurance"),value:e.data.filter(e=>"insurance"===e.type).length},{label:n("reminders.puspakom-service"),value:e.data.filter(e=>"puspakom-service"===e.type).length},{label:n("reminders.road-tax"),value:e.data.filter(e=>"road-tax"===e.type).length},{label:n("reminders.truck-permit"),value:e.data.filter(e=>"truck-permit"===e.type).length},{label:n("reminders.general"),value:e.data.filter(e=>"general"===e.type).length}],[e.data,n]);return(0,i.jsxs)(Z,{children:[(0,i.jsx)(J,{children:n("reminder")}),(0,i.jsx)(K,{children:r.map(e=>(0,i.jsxs)(Y,{children:[(0,i.jsx)(a.A,{component:"h2",children:e.value}),(0,i.jsx)(a.A,{component:"p",children:e.label})]},e.label))})]})}let ee={overdue:"#EF663B",upcoming:"#FCA50E",scheduled:"#0C4929"};function en(){let{data:e}=p(),{t:n}=(0,l.k)("dashboard"),r=(0,S.useMemo)(()=>{if(null==e)return[];let r={overdue:{value:0,color:ee.overdue,id:"overdue",label:n("duedates.overdue"),tooltip:n("duedates.overdue-tooltip")},scheduled:{value:0,color:ee.scheduled,id:"scheduled",label:n("duedates.scheduled"),tooltip:n("duedates.scheduled-tooltip")},upcoming:{value:0,color:ee.upcoming,id:"upcoming",label:n("duedates.upcoming"),tooltip:n("duedates.upcoming-tooltip")}};return e.forEach(e=>{r[e.situation].value+=Number(e.count)}),Object.values(r)},[e,n]);return null==e?(0,i.jsxs)(E,{children:[(0,i.jsx)(D,{variant:"rectangular"}),(0,i.jsx)(T,{variant:"rectangular"})]}):(0,i.jsxs)(E,{children:[(0,i.jsx)(X,{data:r}),(0,i.jsx)($,{data:null!=e?e:[]})]})}var er=r(7572);let et=[{field:"lineNo",headerName:"No.",renderCell:e=>e.api.getAllRowIds().indexOf(e.id)+1,width:20},{field:"driver",headerName:"Driver",width:180},{field:"vehicle",headerName:"Vehicle",width:120},{field:"mileage",headerName:"Mileage (km)",width:220},{field:"date",headerName:"Date",width:180},{field:"endorse",headerName:"",width:160}];function ei(){let{data:e,isLoading:n}=u();return(0,i.jsxs)(g.A,{children:[(0,i.jsx)(L,{children:"Recent Submissions"}),(0,i.jsx)(er.z,{columns:et,hideFooter:!0,disableColumnSorting:!0,disableColumnFilter:!0,rows:null==e?void 0:e.map(e=>({id:e.id,lineNo:e.lineNo,driver:e.session.driver.firstname+" "+e.session.driver.lastname,vehicle:e.session.vehicle.plateNo,mileage:e.session.endMileage-e.session.startMileage,date:Intl.DateTimeFormat().format(1e3*e.session.startTime)})),loading:n})]})}function el(){let{data:e,isLoading:n,refetch:r,isFetching:t}=h(),{t:o}=(0,l.k)("dashboard");return n?(0,i.jsx)(w.Skeleton,{variant:"rectangular",children:(0,i.jsxs)(w,{children:[(0,i.jsx)(w.Heading,{children:o("vehicle")}),(0,i.jsxs)(w.Content,{children:[(0,i.jsxs)(w.ItemLarge,{children:[(0,i.jsx)(a.A,{component:"h2",children:"."}),(0,i.jsx)(a.A,{component:"p",children:o("total-no-of-vehicles")})]}),(0,i.jsx)(w.Separator,{}),(0,i.jsxs)(w.Item,{children:[(0,i.jsx)(a.A,{component:"h2",children:"."}),(0,i.jsx)(a.A,{component:"p",children:o("in-use")})]}),(0,i.jsxs)(w.Item,{children:[(0,i.jsx)(a.A,{component:"h2",children:"."}),(0,i.jsx)(a.A,{component:"p",children:o("unused")})]})]})]})}):null==e?(0,i.jsxs)(w,{children:[(0,i.jsx)(w.Heading,{children:o("vehicle")}),(0,i.jsx)(w.Content,{children:(0,i.jsxs)(w.ItemLarge,{children:[o("error-while-loading"),(0,i.jsx)("p",{children:(0,i.jsx)(d.A,{loading:t,onClick:r,variant:"contained",disableElevation:!0,children:o("refetch")})})]})})]}):(0,i.jsxs)(w,{children:[(0,i.jsx)(w.Heading,{children:o("vehicle")}),(0,i.jsxs)(w.Content,{children:[(0,i.jsxs)(w.ItemLarge,{children:[(0,i.jsx)(a.A,{component:"h2",children:e.vehicleCount}),(0,i.jsx)(a.A,{component:"p",children:o("total-no-of-vehicles")})]}),(0,i.jsx)(w.Separator,{}),(0,i.jsxs)(w.Item,{children:[(0,i.jsx)(a.A,{component:"h2",children:e.vehicleOnDutyCount}),(0,i.jsx)(a.A,{component:"p",children:o("in-use")})]}),(0,i.jsxs)(w.Item,{children:[(0,i.jsx)(a.A,{component:"h2",children:e.vehicleOffDutyCount}),(0,i.jsx)(a.A,{component:"p",children:o("unused")})]})]})]})}function eo(){let{t:e}=(0,l.k)("dashboard"),n=(0,s.GV)(o.mB);return(0,i.jsxs)(N,{as:"main",children:[(0,i.jsx)(I,{children:e("greeting",{name:null==n?void 0:n.displayName})}),(0,i.jsxs)(E,{children:[(0,i.jsx)(C,{}),(0,i.jsx)(el,{})]}),(0,i.jsx)(en,{}),(0,i.jsx)(ei,{})]})}},2744:(e,n,r)=>{"use strict";r.d(n,{GV:()=>a,M_:()=>s});var t=r(2037),i=r(1635),l=r(5357),o=r(8475);let s=(0,t.U1)({reducer:{user:l.oA,[o.q.reducerPath]:o.q.reducer},middleware:e=>e().concat(o.q.middleware),devTools:!1});i.wA.withTypes();let a=i.d4.withTypes();i.Pj.withTypes()},2761:(e,n,r)=>{"use strict";r.d(n,{k:()=>p});var t=r(410),i=r(1732),l=r(2393),o=r(8701),s=r(566),a=r(9125),d=r(6608),c=r(1525);o.Ay.use(d.r).use(s.A).use((0,a.A)((e,n)=>r(6843)("./".concat(e,"/").concat(n,".json")))).init({supportedLngs:c.eo,fallbackLng:c.yL,lng:void 0,fallbackNS:c.xU,defaultNS:c.xU,detection:{order:["path","htmlTag","cookie","navigator"]},preload:[]});let h=o.Ay;function p(e,n){var r;let o=null==(r=(0,t.useParams)())?void 0:r.lng;if("string"!=typeof o)throw Error("useT is only available inside /app/[lng]");{let[e,n]=(0,i.useState)(h.resolvedLanguage);(0,i.useEffect)(()=>{e!==h.resolvedLanguage&&n(h.resolvedLanguage)},[e]),(0,i.useEffect)(()=>{o&&h.resolvedLanguage!==o&&h.changeLanguage(o)},[o])}return(0,l.Bd)(e,n)}},5357:(e,n,r)=>{"use strict";r.d(n,{MU:()=>l,Xp:()=>o,mB:()=>i,oA:()=>s});let t=(0,r(2037).Z0)({name:"user",initialState:{user:null,idToken:null,loading:!0},reducers:{setUser:(e,n)=>{e.user=n.payload,e.loading=!1},clearUser:e=>{e.user=null,e.loading=!1},setIdToken:(e,n)=>{e.idToken=n.payload},clearIdToken:e=>{e.idToken=null}}}),i=e=>e.user.user,l=e=>e.user.loading,o=t.actions,s=t.reducer},6843:(e,n,r)=>{var t={"./en/auth.json":[273,273],"./en/dashboard.json":[7839,839],"./en/translation.json":[992,992]};function i(e){if(!r.o(t,e))return Promise.resolve().then(()=>{var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n});var n=t[e],i=n[0];return r.e(n[1]).then(()=>r.t(i,19))}i.keys=()=>Object.keys(t),i.id=6843,e.exports=i},8475:(e,n,r)=>{"use strict";r.d(n,{q:()=>o});var t=r(6647),i=r(906),l=r(2744);let o=(0,t.xP)({baseQuery:(0,i.cw)({baseUrl:"/",prepareHeaders:e=>{let n=l.M_.getState().user.idToken;return n&&e.set("authorization","Bearer ".concat(n)),e}}),endpoints:()=>({})})},9762:(e,n,r)=>{Promise.resolve().then(r.bind(r,1961))}},e=>{var n=n=>e(e.s=n);e.O(0,[647,446,899,345,719,195,358],()=>n(9762)),_N_E=e.O()}]);